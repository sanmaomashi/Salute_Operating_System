## 一、时间和日期

| 序号 | 命令 |                       作用                       |
| :--: | :--: | :----------------------------------------------: |
|  01  | date |                   查看系统时间                   |
|  02  | cal  | `calendar` 查看日历，`-y` 选项可以查看一年的日历 |

## 二、磁盘信息

| 序号 |      命令      |               作用                |
| :--: | :------------: | :-------------------------------: |
|  01  |     df -h      |   `disk free` 显示磁盘剩余空间    |
|  02  | du -h [目录名] | `disk usage` 显示目录下的文件大小 |

### 1. df

在工作中，一个项目至少需要200G的空间，但是硬盘的空间是有限的。如果不确定硬盘是否够用，可以使用 df 命令查看硬盘的使用情况。

功能：检查文件系统的磁盘空间占用情况。可以利用该命令来获取硬盘被占用了多少空间，目前还剩下多少空间等信息。

说明：linux中df命令可显示所有文件系统对i节点和磁盘块的使用情况。

- 命令参数：

| 参数 |                             含义                             |
| :--: | :----------------------------------------------------------: |
|  -h  |                  以人性化的方式显示文件大小                  |
|  -a  | 显示所有文件系统的磁盘使用情况，包括0块（block）的文件系统，如/proc文件系统。 |
|  -k  |                     以k字节为单位显示。                      |
|  -i  |                显示i节点信息，而不是磁盘块。                 |
|  -t  |         显示各指定类型的文件系统的磁盘空间使用情况。         |
|  -x  | 列出不是某一指定类型文件系统的磁盘空间使用情况（与t选项相反）。 |
|  -T  |                      显示文件系统类型。                      |

查看当前目录磁盘使用情况：

```undefined
df -h
```

查看指定目录磁盘使用情况：

```kotlin
df -h /data/
```

第一列是文件系统对应的硬盘分区
第二列是分区包含的数据块的数据(1数据库为1024字节)
第三四列是已用和未用的数据块数组
第五列是普通用户空间使用的百分比
第六列是文件系统的安装点

其中第三四列已用和未用数据块相加并不等于第二列总数据块，这是因为分区留了少量空间提供给系统管理员使用。

### 2. du

du 命令默认情况下，和 df 命令一样，会显示所有已经挂载的文件系统的使用情况。但是通常我们使用 du 命令来查看某个目录的大小，例如在编译代码时，如果我们想知道编译的进度，可以查看编译结果生成的目录大小来确定

```bash
$ du -sh out/
99G	out/
```

du 命令会计算目录下的文件大小，从而计算出目录的大小，因此这个过程需要点时间。`-s` 表示显示总大小，`-h` 表示以人类可读的方式显示大小。

功能：Linux中du命令用于显示目录或文件的大小，du会显示指定的目录或文件所占用的磁盘空间。

说明：linux中du命令可显示所有文件系统对i节点和磁盘块的使用情况。

命令参数：

```text
-a  #显示目录中文件的大小 单位 KB 。

-b #显示目录中文件的大小，以字节byte为单位。

-c #显示目录中文件的大小，同时也显示总和；单位KB。

-k 、 -m 、#显示目录中文件的大小，-k 单位KB，-m 单位MB.

-s #仅显示目录的总值，单位KB。

-h #以K M G为单位显示，提高可读性~~~（最常用的一个~也可能只用这一个就满足需求了）

-x #以一开始处理时的文件系统为准，若遇上其它不同的文件系统目录则略过。 

-L  #显示选项中所指定符号链接的源文件大小。  

-S  #显示个别目录的大小时，并不含其子目录的大小。 

-X  #在<文件>指定目录或文件。  

--exclude=<目录或文件>  #略过指定的目录或文件。  

-D  #显示指定符号链接的源文件大小。  

-H或--si         #与-h参数相同，但是K，M，G是以1000为换算单位。  

-l  #重复计算硬件链接的文件。
```

查看当前目录每个文件夹的情况：

```swift
du --max-depth=1 -h 
```

查看指定目录每个文件夹的情况：

```kotlin
du --max-depth=1 -h  /data/
```

计算指定文件夹大小

```kotlin
du -sh /data/
```

### 3. free 

有时候UI工具开多，系统会比较卡，我们可以使用 free 命令看下内存的使用情况

系统管理员必须维护他们服务器的健康运行。其中一个重要的部分就是内存。当服务器内存使用率过高时，它会降低服务器的性能。Linux有一个称为 **free** 的工具，来监控内存使用率。

**free** 命令是一个显示系统中空闲和已用内存大小的工具。free 命令的输出和 top 命令相似。大多数Linux发行版已经含有 free 命令。

想要运行，只需在控制台输入**free** 即可。不带选项运行会显示一个以KB为单位的默认输出。

```bash
$ free
```

如我们先前提到的，默认 free 会以 KB 为单位显示信息。free 同样提供给我们 **b (B), -k (KB), -m (MB), -g (GB) and –tera (TB)**这些单位。要显示我们想要的单位，只要选择一个并在 free 后面跟上。下面一个是以 MB 为单位的输出样例。

```
$ free -m
```

这个技巧同样适用于**-b, -k, -g** 以及 **–tera** 选项。

free 同样提供了**-h**选项，这意味着适于人类可读(译注:系统上可能并不存在-h选项，已被-m取代)。那么这与其它的选项有什么不同呢，如**-m**(MB)选项？ 可见的最大不同是**-h**选项会在数字后面加上适于人类可读的单位。让我们看一个例子。

```bash
$ free -h
```

如我们一起看到的，在1,0数字后这里是**G(GB)**字母。当数字并没有达到GB时，free足够聪明来知道并在每个数字后面跟上合适的单位。后面的**M** - 数字929告诉我们它有929MB(译注: 原文为929 number tell us its 969 Megabytes，这里应该为输入错误)。

作为一个状态检查工具，最好的统计内存利用率的方法是使用延迟间隔。这么做的话，我们可以使用**-s**选项后面跟上我们想要间隔的N秒数。我们可以在后面合并几个选项来使输出满足我们的需求。假如我们想要每3秒统计一次内存利用率并且适于人类可读，那么就像这样做:

```bash
$ free -hs 3
```

如果我们想要知道高低内存统计，我们可以使用-l选项。下面是一个例子。

```bash
$ free -l
```

如果我们需要每列的总计信息，我们可以在 free 命令后面跟上 **-t** 选项。这会在字底部额外加入一行显示。

```bash
$ free -t
```

## 三、进程信息

- 所谓进程，通俗地说就是当前正在执行的一个程序

| 序号 |        命令        |                 作用                  |
| :--: | :----------------: | :-----------------------------------: |
|  01  |         ps         |  `process status` 查看进程的详细状况  |
|  02  |        top         |     动态显示运行中的进程并且排序      |
|  03  | kill [-9] 进程代号 | 终止指定代号的进程，`-9` 表示强行终止 |

### 1. ps

首先我们要了解 Linux中查看进程信息的基本命令 ps、top，其中ps(Process Status)查看的是进程信息的一个快照，显示的我们执行ps这个命令时进程的信息，top显示的是进程的动态信息，使用这个命令会看到进程信息的动态变化。

`ps` 默认只会显示当前用户通过终端启动的应用程序

`ps` 选项说明功能

| 选项 |                   含义                   |
| :--: | :--------------------------------------: |
|  a   | 显示终端上的所有进程，包括其他用户的进程 |
|  u   |            显示进程的详细状态            |
|  x   |          显示没有控制终端的进程          |

> 提示：使用 `kill` 命令时，最好只终止由当前用户开启的进程，而不要终止 `root` 身份开启的进程，否则可能导致系统崩溃
>
> - 要退出 `top` 可以直接输入 `q`

### 2.  ps -ef|grep

```bash
ps -ef|grep *** 查看某个进程
```

很多时候我们在linux 中运行一个应用是需要知道他是否成功

比如我们 进入tomcat > bin 目录下
执行./startup.sh启动tomcat

```bash
# ./startup.sh
```



然后想要查看当前的tomcat 进程是否启动, 你们就需要ps了

```bash
# ps -ef|grep tomcat
```

### 3. ps -l

`ps -l` 列出与 本次登录系统 有关的进程信息
ps ( ps -l, 列出的是详细信息 )

### 4. ps -aux

ps -aux 列出在内存中运行的 全部进程信息

ps -aux | grep *** 列出 某个 进程的详细信息

其中每一项参数对应的实际意义
如：

```
[root@localhost logs]# ps -aux
USER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
root         1  0.0  0.0 194128  7272 ?        Ss   Jun24   0:43 /usr/lib/systemd/systemd --switched-root --system --deserialize 22
```

USER：进程的所属用户，
PID ：进程的进程ID号，
%CPU ：进程占用的 CPU资源 百分比，
%MEM ：进程占用的 物理内存 百分比，
VSZ ：进程使用掉的虚拟内存量 (Kbytes) ，
RSS ：进程占用的固定的内存量 (Kbytes) ，
TTY ：与进程相关联的终端（tty),?代表无关,tty1-tty6是本机上面的登入者程序,pts/0表示为由网络连接进主机的程序。
STAT ：进程的状态，具体见2.1列出来的部分 ，
START ：进程开始创建的时间 ，
TIME ：进程使用的总cpu时间，
COMMAND: 进程对应的实际程序。

### 5. top

`top`动态显示内存中的进程信息（top）

### 6. kill -9 pid

kill -9 pid 杀死进程

其他相关操作

其中pid 对应的是每个进程的编号

比如查看tomcat 对应进程号

可以通过ps -aux|grep tomcat或者 ps -ef|grep tomcat进行进程查询

如果想强行关闭 `root 6722 43589 0 19:22 pts/1 00:00:00 grep --color=auto tomcat` 就可以执行`kill -9 6722` 来强行杀掉改进程
`注：` 有些进程是不允许停止的，因为停止会造成系统的不稳定，甚至崩溃。

## 四、日志信息

### 1. tail -f catalina.out

很多时候需要知道一个程序运行后的一下信息，如tomcat 后的项目接口调用情况

1. 进入`tomcat > bin` 目录下
   执行`./startup.sh` 启动`tomcat`

2. 查看tomcat启动日志

1、先切换到：`cd 当前的tomcat目录/logs`

2、`tail -f catalina.out` 或者指定查多少行：`tail -200 catalina.out`

```bash
[root@localhost apache-tomcat-9.0.31]# cd logs
[root@localhost logs]# tail -f catalina.out
```

```bash
tail -f -n 200  catalina.out
```

### 2. tail 参数

查看看日志参数：

-f循环读取

-q不显示处理信息

-v显示详细的处理信息

-c<数目> 显示的字节数

-n<行数> 显示行数

--pid=PID 与-f合用,表示在进程ID,PID死掉之后结束.

-q, --quiet, --silent从不输出给出文件名的首部

-s, --sleep-interval=S 与 -f 合用,表示在每次反复的间隔休眠S秒

### 3. 关键词高亮显示

```bash
tail -n 200 -f dpe_partner_all.log | perl -pe 's/(关键词)/\e[1;31m$1\e[0m/g'
```

例如高亮显示ERROR

```shell
tail -n 200 -f dpe_partner_all.log | perl -pe 's/(ERROR)/\e[1;31m$1\e[0m/g'
```

先看看我们目前有哪些日志文件了

假如我要查看catalina.out 文件，同时高亮显示 java.lang.IllegalArgumentException，那么就可以这样：

```shell
tail -n 200 -f  catalina.out| perl -pe 's/(java.lang.IllegalArgumentException)/\e[1;31m$1\e[0m/g'
```

## 五、系统信息

### 1. 查看内核

```bash
uname -a
```

### 2. 查看系统是32位还是64位

```bash
# 查看long的位数，返回32或64

getconf LONG_BIT

# 查看文件信息，包含32-bit就是32位，包含64-bit就是64位

file /sbin/init
```

### 3. 查看Ubuntu版本

```bash
cat /etc/issue

或 cat /etc/lsb-release

或 lsb_release -dsc
```

